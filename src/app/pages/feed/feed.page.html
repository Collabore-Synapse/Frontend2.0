<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-avatar slot="start" class="ion-padding">
      <ion-img [src]="userInfo?.pfp != null ? userInfo?.pfp : 'https://ionicframework.com/docs/img/demos/thumbion-thumbnail.svg'"></ion-img>
    </ion-avatar>
    <ion-title> {{ userInfo?.name }} </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-grid>
    <ion-row>
      <ion-col size="12" size-md="8" offset-md="2" *ngFor="let post of postList$ | async">
          <ion-card>
            <ion-card-header class="ion-no-padding">
              <ion-item lines="none" class="ion-no-padding ion-margin-start">
                <ion-avatar slot="start" >
                  <ion-img [src]="post.pfp != null ? post.link_pfp : '../../../../../assets/modo-serio.png'"></ion-img>
                </ion-avatar>

                <ion-label slot="start">
                  <ion-card-title> {{ post.name }} </ion-card-title>
                  <ion-card-subtitle> {{ post.city }} </ion-card-subtitle>
                </ion-label>
              </ion-item>
            </ion-card-header>
            <ion-img [src]="post.image"></ion-img>
            <ion-card-content>
              <ion-icon size="small" color="{{ post.like ? 'danger' : 'primary' }}" class="ion-no-margin icon" slot="start" name="{{ post.like ? 'heart' : 'heart-outline' }}"></ion-icon>
              <ion-icon (click)="openModalComments(post.id)" size="small" class="ion-no-margin icon" slot="start" name="chatbubble-ellipses-outline"></ion-icon>
              <ion-icon size="small" class="ion-no-margin ion-float-end" slot="end" name="ellipsis-vertical-outline"></ion-icon>
              <ion-title class="ion-text-capitalize ion-no-margin ion-no-padding"> {{ post.title }} </ion-title>

              <ion-item lines="none" class="ion-no-padding">
                <ion-label>
                  <h3>Coment√°rios: {{ post.comments.commentsData.length }} </h3>
                  <p> 
                    {{ 
                      post.comments.commentsData[0]?.text <= limitCard ?
                      post.comments.commentsData[0]?.text :
                    (post.comments.commentsData[0]?.text | slice:0:limitCard) + ' ...'
                    }} 
                  </p>
                </ion-label>
              </ion-item>
            </ion-card-content>
          </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

